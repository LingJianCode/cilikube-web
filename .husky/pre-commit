#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œä»£ç æ£€æŸ¥
echo "ğŸ” Running pre-commit checks..."

# å‰ç«¯ä»£ç æ£€æŸ¥
cd cilikube-web
echo "ğŸ“ Linting frontend code..."
npx lint-staged

# ç±»å‹æ£€æŸ¥
echo "ğŸ”§ Running type check..."
pnpm type-check

# è¿è¡Œæµ‹è¯•
echo "ğŸ§ª Running tests..."
pnpm test --run

# åç«¯ä»£ç æ£€æŸ¥
cd ../cilikube
echo "ğŸ“ Linting backend code..."
go fmt ./...
go vet ./...

# è¿è¡Œåç«¯æµ‹è¯•
echo "ğŸ§ª Running backend tests..."
go test -short ./...

echo "âœ… Pre-commit checks passed!"
